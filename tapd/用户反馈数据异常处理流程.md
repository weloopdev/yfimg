# 用户反馈数据异常处理流程

> 这里所说的数据异常是指：产生的数据跟用户实际不一致或数据丢失

由于数据异常产生的原因比较多，涉及的人员比较多，可能的原因大概如下：

- App逻辑异常：下个版本解决，提供避免产生的方法
- 服务器解析逻辑异常：服务器在线更新解决
- 解析库异常：服务器在线更新解决，app本地下个版本解决
- JNI异常（Android、服务器）：服务器在线更新解决，app本地下个版本解决
- 固件记录数据异常：固件更新解决
- 算法识别异常：固件更新解决

为了提高沟通效率，把解决这类问题的流程总结如下，如有遗漏或者更高效的方法，欢迎补充！

1. [客服]收到用户反馈，首先让**用户发送问题反馈**，然后收集到 **设备ID**：xxxxxx **手机类型**：Android/Ios **问题简要描述** 

   新加入手机类型的目的是，客服反馈问题的时间可能在开发上班时间外，加入手机类型，方便相关App开发人员去查看后台日志

2. [App]开发人员利用设备ID到日志服务器去拿到日志分析

   WeLoop国内：[网址](http://115.29.99.125:8080/weloopInterface/Weblogin.jsp) yftext/111111

   WeLoop海外：[网址](http://52.74.201.130:8080/weloopInterface/Weblogin.jsp ) yftest/123456

   Coros:后续补充

3. [App] 从日志里面找到对于的数据，先看下服务器返回的json格式数据跟用户反馈的情况是否一致

   假如服务器返回的json是对的，那就是`App端逻辑异常` App端修改后发布新版本 Return

   假如服务器返回的json异常，不一定是服务器的问题 Continue

4. [App] 日志里面找到原始数据，json格式里面找到`frontStatus`字段，使用韦哥提供的[工具](http://121.42.30.231/json)解析下数据

   假如服务器返回的数据和工具的不一致，那大概就是`服务器解析逻辑异常` 提供json里面的`saveFilePath`和`userId`给到服务器 Return

   假如两者数据一致 Continue

   工具大概使用如下：

   ![image](https://raw.githubusercontent.com/weloopdev/yfimg/yangxi/tapd/1490416101057.png)

5. [解析库]把解析库的log日志、`frontStatus`和原始数据提供给解析库的维护者 陈琎桦、杨曦

   这一步可以看出大部分的问题

   假如解析库解析的数据和工具不一致，拿大概就是`JNI异常` 

   假如`解析库异常`，修改解析库，验证后服务器在线更新

   假如`固件记录数据异常` 更新固件解决

   假如`算法识别异常`更新固件解决